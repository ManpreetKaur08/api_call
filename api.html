<!DOCTYPE html>

<html>
    <head>
        <title>API Call</title>
        <script   src="https://code.jquery.com/jquery-3.1.1.min.js"  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
        <style type = "text/css">

            body{

                font-family: Georgia; 
            }

        </style>

 <script>

  function getCall(){
    
                req = new XMLHttpRequest();
                console.log("create request"); 
    
                req.open("GET", "https://manpreetkaur08.github.io/api_call/api.json", true);
    
                console.log("open"); 
    
                req.onreadystatechange = function(){

                    console.log("ready state.");
    
                if (req.readyState == 4 && req.status == 200) {
    
    
                    console.log("receive response");
    
                    new_data = req.responseText;
    
                    returnHTML = new_data;
                    
                    var data = JSON.parse(new_data);
        
                    returnHTML += "<br>"+
    
                        data["description"];
        
                    document.getElementById("message").innerHTML = returnHTML;

                    
    
    }
            else if (req.readyState == 4 && req.status != 200) {
    
            document.getElementById("data").innerHTML = "Wrong";
    
    }
    
              else if (req.readyState == 3) {
    
              document.getElementById("data").innerHTML = "Try again";
    
    }
        }
    
    }
    // HTTP request
     req.send();
    console.log("Sent");
  
//function to onload fetch. 
window.onload=function(){

result = fetch("https://manpreetkaur08.github.io/api_call/api.json")

.then (result => result.text())
.then (data => 
   {
   data = JSON.parse(data)
  
    console.log("The forecast is " + data); 
   })
.catch (error => console.log(error))


    }
    
</script>
       
    </head>
    
    <body onload="getCall()">

        <h1>Forecast</h1>

        <div id="messages">Loading data</div>

        <p>The API selected is supposed to give a weather forecast of windspeed, transparency, and climate.</p>
        <p>The actual JSON version of the API is: https://www.7timer.info/bin/astro.php?lon=113.2&lat=23.1&ac=0&unit=metric&output=json&tzshift=0</p>
        <p>The website to find public APIs was in the reading: https://mixedanalytics.com/blog/list-actually-free-open-no-auth-needed-apis/</p>
        <p>The options used for this API request were to display weather forecast besides temperature. Instead, 
        the use is for windspeed, direction, transparency, and cloud covering. These key-value pairs are incorporated because of the data that is being given. It is seen that all given values are based on integers.</p>
        <p>This API would be useful for weather forecasters that want to know more about the climate and it would also be useful for anything that is used for testing climate, and may also be used for predictions in weather.</p>
     
    </body>

    
</html>
